#!/usr/bin/python
#

import sys
from optparse import OptionParser
import runpy

print """FFADO generic mixer starter
 Copyright 2007 Arnold Krille, Pieter Palmers
 Licensed under the GPL v2 and v3.
"""

myname = sys.argv[0].split("/")[-1].split("_")[-1]

mixerapps = $MIXERAPPS

if not myname in mixerapps:
	print "Have to figure which mixer to start by commandline..."

	parser = OptionParser()
	parser.add_option( "-m", "--mixer", dest="mixer", help="The mixer-app to actually start", choices=mixerapps )

	(options, args) = parser.parse_args()

	myname = options.mixer

if not myname or len(myname) == 0:
	print "No mixer selected. Try the option \"-m <mixer>\" with <mixer> being one of " + str( mixerapps )
	exit( 1 )

print "Will start mixer '"+myname+"'"

sys.path.append( "$PYTHONDIR" )

runpy.run_module( "mixer_"+myname, run_name="__main__" )

print "Finished."

